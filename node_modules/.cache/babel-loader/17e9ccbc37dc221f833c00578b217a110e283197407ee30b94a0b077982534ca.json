{"ast":null,"code":"// utils/timelineEngine.js\nfunction normalize(values) {\n  if (!values || values.length === 0) return [];\n  const min = Math.min(...values);\n  const max = Math.max(...values);\n  if (max === min) return values.map(() => 0.5);\n  return values.map(v => (v - min) / (max - min));\n}\n\n// Builds a simple 4-color heatmap block scale\nfunction getColor(intensity) {\n  const idx = Math.floor(intensity * 3); // 0–3\n  return [\"#e2e8f0\", \"#a5b4fc\", \"#6366f1\", \"#4338ca\"][idx]; // light → dark\n}\n\n// Extract a tiny sparkline (mini trend line)\nexport function generateSparklineData(area, responseData) {\n  var _responseData$chart;\n  if (!(responseData !== null && responseData !== void 0 && (_responseData$chart = responseData.chart) !== null && _responseData$chart !== void 0 && _responseData$chart.datasets)) return [];\n  const ds = responseData.chart.datasets.find(d => d.label === area);\n  if (!ds) return [];\n  return ds.data; // array of values\n}\n\n// Generate heatmap segments for insight panel\nexport function generateHeatmap(area, responseData) {\n  const values = generateSparklineData(area, responseData);\n  const normalized = normalize(values);\n  return normalized.map(n => ({\n    intensity: n,\n    color: getColor(n)\n  }));\n}","map":{"version":3,"names":["normalize","values","length","min","Math","max","map","v","getColor","intensity","idx","floor","generateSparklineData","area","responseData","_responseData$chart","chart","datasets","ds","find","d","label","data","generateHeatmap","normalized","n","color"],"sources":["C:/Users/LENOVO/Desktop/realestate-chatbot/frontend/src/utils/timelineEngine.js"],"sourcesContent":["// utils/timelineEngine.js\r\nfunction normalize(values) {\r\n  if (!values || values.length === 0) return [];\r\n  const min = Math.min(...values);\r\n  const max = Math.max(...values);\r\n  if (max === min) return values.map(() => 0.5);\r\n\r\n  return values.map(v => (v - min) / (max - min));\r\n}\r\n\r\n// Builds a simple 4-color heatmap block scale\r\nfunction getColor(intensity) {\r\n  const idx = Math.floor(intensity * 3); // 0–3\r\n  return [\"#e2e8f0\", \"#a5b4fc\", \"#6366f1\", \"#4338ca\"][idx]; // light → dark\r\n}\r\n\r\n\r\n// Extract a tiny sparkline (mini trend line)\r\nexport function generateSparklineData(area, responseData) {\r\n  if (!responseData?.chart?.datasets) return [];\r\n\r\n  const ds = responseData.chart.datasets.find(d => d.label === area);\r\n  if (!ds) return [];\r\n\r\n  return ds.data; // array of values\r\n}\r\n\r\n\r\n// Generate heatmap segments for insight panel\r\nexport function generateHeatmap(area, responseData) {\r\n  const values = generateSparklineData(area, responseData);\r\n  const normalized = normalize(values);\r\n\r\n  return normalized.map(n => ({\r\n    intensity: n,\r\n    color: getColor(n)\r\n  }));\r\n}\r\n"],"mappings":"AAAA;AACA,SAASA,SAASA,CAACC,MAAM,EAAE;EACzB,IAAI,CAACA,MAAM,IAAIA,MAAM,CAACC,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;EAC7C,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,GAAGF,MAAM,CAAC;EAC/B,MAAMI,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,GAAGJ,MAAM,CAAC;EAC/B,IAAII,GAAG,KAAKF,GAAG,EAAE,OAAOF,MAAM,CAACK,GAAG,CAAC,MAAM,GAAG,CAAC;EAE7C,OAAOL,MAAM,CAACK,GAAG,CAACC,CAAC,IAAI,CAACA,CAAC,GAAGJ,GAAG,KAAKE,GAAG,GAAGF,GAAG,CAAC,CAAC;AACjD;;AAEA;AACA,SAASK,QAAQA,CAACC,SAAS,EAAE;EAC3B,MAAMC,GAAG,GAAGN,IAAI,CAACO,KAAK,CAACF,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;EACvC,OAAO,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAACC,GAAG,CAAC,CAAC,CAAC;AAC5D;;AAGA;AACA,OAAO,SAASE,qBAAqBA,CAACC,IAAI,EAAEC,YAAY,EAAE;EAAA,IAAAC,mBAAA;EACxD,IAAI,EAACD,YAAY,aAAZA,YAAY,gBAAAC,mBAAA,GAAZD,YAAY,CAAEE,KAAK,cAAAD,mBAAA,eAAnBA,mBAAA,CAAqBE,QAAQ,GAAE,OAAO,EAAE;EAE7C,MAAMC,EAAE,GAAGJ,YAAY,CAACE,KAAK,CAACC,QAAQ,CAACE,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,KAAK,KAAKR,IAAI,CAAC;EAClE,IAAI,CAACK,EAAE,EAAE,OAAO,EAAE;EAElB,OAAOA,EAAE,CAACI,IAAI,CAAC,CAAC;AAClB;;AAGA;AACA,OAAO,SAASC,eAAeA,CAACV,IAAI,EAAEC,YAAY,EAAE;EAClD,MAAMb,MAAM,GAAGW,qBAAqB,CAACC,IAAI,EAAEC,YAAY,CAAC;EACxD,MAAMU,UAAU,GAAGxB,SAAS,CAACC,MAAM,CAAC;EAEpC,OAAOuB,UAAU,CAAClB,GAAG,CAACmB,CAAC,KAAK;IAC1BhB,SAAS,EAAEgB,CAAC;IACZC,KAAK,EAAElB,QAAQ,CAACiB,CAAC;EACnB,CAAC,CAAC,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}